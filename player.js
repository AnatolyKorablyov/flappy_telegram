(function(){var f;function g(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}g.prototype.clone=function(){return new g(this.x,this.y)};g.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};g.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};g.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function h(a,b){this.width=a;this.height=b}h.prototype.clone=function(){return new h(this.width,this.height)};h.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};h.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};h.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function l(a,b,e,d){this.a=a;this.b=b;this.width=e;this.height=d}l.prototype.clone=function(){return new l(this.a,this.b,this.width,this.height)};l.prototype.h=function(){return new h(this.width,this.height)};l.prototype.ceil=function(){this.a=Math.ceil(this.a);this.b=Math.ceil(this.b);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
l.prototype.floor=function(){this.a=Math.floor(this.a);this.b=Math.floor(this.b);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};l.prototype.round=function(){this.a=Math.round(this.a);this.b=Math.round(this.b);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function m(){this.a=new h(600,400);this.c=new g(100,100);this.b=new h(50,36);this.m=-10;this.g=new g(60,50);this.u=new h(50,36);this.i=new g(0,0);this.l=new h(229,620);this.f=2.5*this.b.width;this.v="italic 30pt Arial"};var n=new m;function p(){this.a=new g(n.c.x,n.c.y);this.f=new h(n.b.width,n.b.height);this.b=0;this.c=new Image;this.c.src="src/images/bird.png"}p.prototype.s=function(){return this.c};p.prototype.j=function(){return this.a.clone()};p.prototype.h=function(){return this.f.clone()};var q=new m;function r(a){this.c=new Image;this.c.src="src/images/pipe.png";var b;b=q.f;b=Math.floor(Math.random()*(q.a.height-b+1))+b;this.b=new g(a,0);this.a=new g(a,b);this.g=new h(50,Math.floor(Math.random()*(b-q.f-0+1))+0);this.f=new h(50,q.a.height-b);this.w=!1}r.prototype.s=function(){return this.c};r.prototype.j=function(){return[this.b.clone(),this.a.clone()]};r.prototype.h=function(){return[this.g.clone(),this.f.clone()]};
r.prototype.o=function(){this.f=this.g=this.a=this.b=this.c=null;this.w=!1};function t(){this.u=!0;this.a=[];u(this)}function v(a){a.a.push(new r(400+200*a.a.length))}t.prototype.o=function(a){this.a[a].o();this.a.splice(a,1)};
function u(a){if(!a.u){a.l=null;a.f=null;a.g=null;a.c=null;a.i=null;var b=a.b;b.c=null;b.a=null;b.f=null;b.b=0;for(b=a.a.length-1;0<=b;--b)a.o(b)}a.l=new Image;a.l.src="src/images/background.png";a.f=new Audio;a.f.src="src/sounds/sfx_swooshing.ogg";a.g=new Audio;a.g.src="src/sounds/sfx_point.ogg";a.c=new Audio;a.c.src="src/sounds/smb_mariodie.wav";a.i=new Audio;a.i.src="src/sounds/08-water-world.mp3";w(a);w(a);a.b=new p;a.m=new g(0,0);for(b=0;8>b;++b)v(a);
a.v=0;a.u=!1}function w(a){a.f.load();a.g.load();a.c.load();a.i.load()}function y(a){a.c.load();a.c.play()}function z(a){a.i.load();a.i.play()}function A(a){a.b.b++;a=a.b;a.a.y+=a.b};var B=new m;function C(a){this.c={width:a.width,height:a.height};this.b=a.getContext("2d");this.a=document.getElementById("score");this.a.style.font=B.v;this.a.style.color="white";this.a.style.position="absolute";this.a.style.left=B.a.width-180+"px";this.a.style.top="0px"};var D=new m;function E(a){this.c=!1;f=this;this.f=a;this.a=new t;this.b=new C(a);F(this)}function F(a){var b=document.createElement("button");b.style.position="absolute";b.style.left=D.a.width/2+"px";b.style.top=D.a.height/2+"px";b.appendChild(document.createTextNode("START!"));b.onclick=function(){b.parentNode.removeChild(b);G(a,a.f)};document.body.appendChild(b)}
function H(a){a.c=!1;w(a.a);y(a.a);clearInterval(a.i);clearInterval(a.g);var b=document.createElement("button");b.style.position="absolute";b.style.left=D.a.width/2+"px";b.style.top=D.a.height/2+"px";b.appendChild(document.createTextNode("RESTART"));var e=document.createElement("button");e.style.position="absolute";e.style.left=D.a.width/2+10+"px";e.style.top=D.a.height/2+30+"px";e.appendChild(document.createTextNode("STATS"));b.onclick=function(){b.parentNode.removeChild(b);e.parentNode.removeChild(e);
G(a,a.f)};document.body.appendChild(b);document.body.appendChild(e)}
function G(a,b){a.c=!0;w(a.a);u(a.a);z(a.a);window.addEventListener("keypress",a.l);b.onmouseup=function(){J(a)};a.i=setInterval(function(){var b=a.a;A(b);for(var d=0;d<b.a.length;++d){var c=b.a[d];c.b.x-=5;c.a.x-=5}b=a.b;b.b.clearRect(0,0,b.c.width,b.c.height);var b=D.i,d=D.a,c=D.i,k=D.l;a.b.b.drawImage(a.a.l,c.x,c.y,k.width,k.height,b.x,b.y,d.width,d.height);b=a.a.b.j();d=a.a.b.h();c=a.a.m;k=D.u;a.b.b.drawImage(a.a.b.s(),c.x,c.y,k.width,k.height,b.x,b.y,d.width,d.height);for(b=0;b<a.a.a.length;++b)d=
a.a.a[b].j()[0],c=a.a.a[b].h()[0],a.b.b.drawImage(a.a.a[b].s(),d.x,d.y,c.width,c.height),d=a.a.a[b].j()[1],c=a.a.a[b].h()[1],a.b.b.drawImage(a.a.a[b].s(),d.x,d.y,c.width,c.height);a.b.a.innerHTML="Score: "+a.a.v;b=a.a.b.j();d=a.a.b.h();for(c=0;c<a.a.a.length;++c){var k=a.a.a[c].j()[0],x=a.a.a[c].h()[0],P=a.a.a[c].j()[1],Q=a.a.a[c].h()[1];if(!a.a.a[c].w&&k.x+x.width<b.x){a.a.a[c].w=!0;var I=a.a;I.g.load();I.g.play();a.a.v++}0>k.x+x.width&&(a.a.o(c),v(a.a));(K(b,d,k,x)||K(b,d,P,Q))&&H(a)}a.a.b.j().y+
a.a.b.h().height>D.a.height&&H(a)},1E3/30);a.g=setInterval(function(){var b=a.a.m;b.x==2*D.g.x?b.x=0:b.x+=2*D.g.x;a.a.m=b},100)}function J(a){if(a.c){var b=a.a;b.f.load();b.f.play();0<a.a.b.j().y+a.a.b.h().height/2?(a=a.a,a.b.b=n.m,a=a.b,a.a.y+=a.b):A(a.a)}}E.prototype.l=function(a){32==a.keyCode&&J(f)};
function K(a,b,e,d){a:{a=new l(a.x,a.y,b.width,b.height);var c=new l(e.x,e.y,d.width,d.height);e=Math.max(a.a,c.a);d=Math.min(a.a+a.width,c.a+c.width);if(e<=d&&(b=Math.max(a.b,c.b),c=Math.min(a.b+a.height,c.b+c.height),b<=c)){a.a=e;a.b=b;a.width=d-e;a.height=c-b;a=!0;break a}a=!1}return a};function L(){new E(document.querySelector("canvas"))}var M=["Sample","start"],N=this;M[0]in N||!N.execScript||N.execScript("var "+M[0]);for(var O;M.length&&(O=M.shift());)M.length||void 0===L?N[O]?N=N[O]:N=N[O]={}:N[O]=L;})();
